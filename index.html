<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Emotional Learning - Cinematic Explanation</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;500;700&family=Quicksand:wght@400;600&display=swap');

        :root {
            --bg-color: #F9F7F2; /* 暖米色背景 */
            --text-primary: #2C3E50;
            --c-self-aware: #E0BBE4; /* 紫色 - 自我意识 */
            --c-self-manage: #957DAD; /* 深紫 - 自我管理 */
            --c-social: #D291BC; /* 粉色 - 社会意识 */
            --c-relation: #FEC8D8; /* 浅粉 - 人际关系 */
            --c-decision: #FFDFD3; /* 橙粉 - 决策 */
            --accent: #FF9AA2;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Quicksand', 'Noto Sans SC', sans-serif;
            overflow: hidden;
        }

        /* 影院模式容器 16:9 */
        #cinema-container {
            width: 100%;
            max-width: 1280px;
            aspect-ratio: 16 / 9;
            background-color: var(--bg-color);
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            overflow: hidden;
            border-radius: 8px;
        }

        /* 装饰背景元素 */
        .bg-shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.4;
            filter: blur(40px);
            z-index: 0;
            animation: float 10s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(20px, -20px); }
        }

        /* 主要内容区域 */
        #stage {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        /* 中心图形容器 */
        .graphic-container {
            position: relative;
            width: 600px;
            height: 600px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 1s cubic-bezier(0.25, 1, 0.5, 1);
        }

        /* 文字标题 */
        .main-title {
            font-size: 3rem;
            font-weight: 700;
            color: var(--text-primary);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s ease;
            text-align: center;
            position: absolute;
            z-index: 10;
        }

        /* CASEL 轮盘 */
        .wheel-svg {
            width: 100%;
            height: 100%;
            transform: scale(0);
            transition: transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .wheel-sector {
            transform-origin: 300px 300px;
            cursor: default;
            transition: opacity 0.5s, transform 0.5s;
            stroke: #fff;
            stroke-width: 4px;
        }
        
        .wheel-icon {
            opacity: 0;
            transition: opacity 0.5s;
        }

        .center-circle {
            fill: white;
            filter: drop-shadow(0 4px 10px rgba(0,0,0,0.1));
            transition: transform 0.5s;
        }

        /* 具体的场景元素 */
        .scene-element {
            position: absolute;
            opacity: 0;
            transition: all 0.8s ease;
        }

        /* 字幕条 */
        #subtitle-box {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            text-align: center;
            z-index: 100;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            transition: opacity 0.5s;
        }

        .sub-cn {
            display: block;
            font-size: 1.5rem;
            color: #333;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .sub-en {
            display: block;
            font-size: 1rem;
            color: #666;
            font-weight: 400;
            font-style: italic;
        }

        /* 进度条 */
        #progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--c-self-aware), var(--c-decision));
            width: 0%;
            z-index: 101;
            transition: width 0.1s linear;
        }

        /* 动画状态类 */
        .fade-in { opacity: 1 !important; transform: translateY(0) !important; }
        .fade-out { opacity: 0 !important; transform: translateY(-20px) !important; }
        .scale-up { transform: scale(1) !important; }
        .dimmed { opacity: 0.2; transform: scale(0.95); }
        .highlight { opacity: 1; transform: scale(1.05); filter: drop-shadow(0 10px 20px rgba(0,0,0,0.1)); z-index: 5; }

        /* 场景特定的SVG图标 */
        .icon-svg {
            width: 150px;
            height: 150px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        /* 结尾的粒子 */
        .particle {
            position: absolute;
            background: var(--accent);
            border-radius: 50%;
            pointer-events: none;
        }

    </style>
</head>
<body>

    <div id="cinema-container">
        <!-- 动态背景 -->
        <div class="bg-shape" style="top: 10%; left: 10%; width: 300px; height: 300px; background: var(--c-self-aware);"></div>
        <div class="bg-shape" style="bottom: 20%; right: 10%; width: 400px; height: 400px; background: var(--c-relation); animation-delay: -5s;"></div>
        <div class="bg-shape" style="top: 40%; right: 30%; width: 200px; height: 200px; background: var(--c-decision); animation-delay: -2s;"></div>

        <!-- 舞台区域 -->
        <div id="stage">
            <div id="title-text" class="main-title">Social Emotional Learning<br><span style="font-size: 0.6em; font-weight: 300;">社會情緒學習</span></div>
            
            <div class="graphic-container">
                <!-- SVG 轮盘 -->
                <svg class="wheel-svg" viewBox="0 0 600 600">
                    <defs>
                        <!-- 阴影滤镜 -->
                        <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
                            <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
                            <feOffset dx="2" dy="2" result="offsetblur"/>
                            <feComponentTransfer>
                                <feFuncA type="linear" slope="0.3"/>
                            </feComponentTransfer>
                            <feMerge> 
                                <feMergeNode/>
                                <feMergeNode in="SourceGraphic"/> 
                            </feMerge>
                        </filter>
                    </defs>

                    <!-- 5个扇区 -->
                    <!-- 1. Self-Awareness (Orange/Purple) -->
                    <path id="sector-1" class="wheel-sector" fill="#E0BBE4" d="M300,300 L300,50 A250,250 0 0,1 537.7,222.6 Z" />
                    
                    <!-- 2. Self-Management (Deep Purple) -->
                    <path id="sector-2" class="wheel-sector" fill="#957DAD" d="M300,300 L537.7,222.6 A250,250 0 0,1 446.9,502.2 Z" />
                    
                    <!-- 3. Social Awareness (Pink) -->
                    <path id="sector-3" class="wheel-sector" fill="#D291BC" d="M300,300 L446.9,502.2 A250,250 0 0,1 153.1,502.2 Z" />
                    
                    <!-- 4. Relationship Skills (Light Pink) -->
                    <path id="sector-4" class="wheel-sector" fill="#FEC8D8" d="M300,300 L153.1,502.2 A250,250 0 0,1 62.3,222.6 Z" />
                    
                    <!-- 5. Responsible Decision-Making (Orange Pink) -->
                    <path id="sector-5" class="wheel-sector" fill="#FFDFD3" d="M300,300 L62.3,222.6 A250,250 0 0,1 300,50 Z" />

                    <!-- 中心圆 -->
                    <circle cx="300" cy="300" r="80" class="center-circle" />
                    <text x="300" y="305" text-anchor="middle" fill="#555" font-size="24" font-weight="bold" font-family="Quicksand">SEL</text>
                </svg>

                <!-- 场景图标 (叠加在中间) -->
                <!-- 1. 镜子 (自我觉察) -->
                <svg id="icon-1" class="icon-svg" viewBox="0 0 100 100">
                    <circle cx="50" cy="40" r="25" fill="none" stroke="#6a4c93" stroke-width="4"/>
                    <path d="M50 65 L50 85 M35 85 L65 85" stroke="#6a4c93" stroke-width="4" stroke-linecap="round"/>
                    <circle cx="58" cy="35" r="3" fill="#6a4c93"/>
                    <path d="M40 35 Q50 50 60 35" fill="none" stroke="#6a4c93" stroke-width="3" stroke-linecap="round"/>
                </svg>

                <!-- 2. 调节器 (自我管理) -->
                <svg id="icon-2" class="icon-svg" viewBox="0 0 100 100">
                    <rect x="20" y="45" width="60" height="10" rx="5" fill="#e0e0e0"/>
                    <circle cx="40" cy="50" r="12" fill="#957DAD"/>
                    <path d="M30 30 L40 50 L50 30" fill="none" stroke="#957DAD" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>

                <!-- 3. 心连心 (社会意识) -->
                <svg id="icon-3" class="icon-svg" viewBox="0 0 100 100">
                    <path d="M30 40 A15 15 0 1 1 60 40 A15 15 0 1 1 90 40" fill="none" stroke="#D291BC" stroke-width="4"/>
                    <circle cx="45" cy="40" r="15" fill="#D291BC" opacity="0.5"/>
                    <circle cx="75" cy="40" r="15" fill="#D291BC" opacity="0.5"/>
                </svg>

                <!-- 4. 握手/对话 (人际关系) -->
                <svg id="icon-4" class="icon-svg" viewBox="0 0 100 100">
                    <path d="M20 50 Q35 20 50 50 T80 50" fill="none" stroke="#FEC8D8" stroke-width="5" stroke-linecap="round"/>
                    <circle cx="20" cy="50" r="6" fill="#FEC8D8"/>
                    <circle cx="80" cy="50" r="6" fill="#FEC8D8"/>
                </svg>

                <!-- 5. 迷宫/路径 (决策) -->
                <svg id="icon-5" class="icon-svg" viewBox="0 0 100 100">
                    <path d="M50 80 L50 50 L20 20 M50 50 L80 20" fill="none" stroke="#FFDFD3" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="50" cy="85" r="5" fill="#FFDFD3"/>
                    <path d="M15 15 L25 25 M75 25 L85 15" stroke="#FFDFD3" stroke-width="3"/>
                </svg>
            </div>
        </div>

        <!-- 字幕 -->
        <div id="subtitle-box">
            <span class="sub-cn">準備好了嗎？</span>
            <span class="sub-en">Are you ready?</span>
        </div>

        <!-- 进度条 -->
        <div id="progress-bar"></div>
    </div>

    <script>
        // 脚本数据：时间、中文、英文、动作回调
        const timeline = [
            {
                duration: 4000,
                cn: "想像你的内心是一座正在生長的花園。",
                en: "Imagine your mind is a growing garden.",
                action: () => {
                    document.getElementById('title-text').classList.add('fade-in');
                    document.querySelector('.wheel-svg').style.transform = "scale(0.1)";
                    document.querySelector('.wheel-svg').style.opacity = "0";
                }
            },
            {
                duration: 5000,
                cn: "這就是社會情緒學習 (SEL)，一種幫助我們理解自我與世界的工具。",
                en: "This is Social Emotional Learning (SEL), a tool to understand ourselves and the world.",
                action: () => {
                    document.getElementById('title-text').classList.remove('fade-in'); // 隐藏标题
                    document.querySelector('.wheel-svg').style.opacity = "1";
                    document.querySelector('.wheel-svg').classList.add('scale-up'); // 显示轮盘
                }
            },
            {
                duration: 4000,
                cn: "它由五個核心部分组成，就像花園里的五種養分。",
                en: "It consists of five core competencies, like five nutrients for the garden.",
                action: () => {
                    // Reset highlights
                    resetWheel();
                }
            },
            // 1. Self-Awareness
            {
                duration: 6000,
                cn: "第一：自我覺察。了解你的感受、價值觀和優勢。",
                en: "First: Self-Awareness. Knowing your feelings, values, and strengths.",
                action: () => {
                    highlightSector(1);
                    showIcon(1);
                }
            },
            // 2. Self-Management
            {
                duration: 6000,
                cn: "第二：自我管理。學會調節情緒，設定目標，並在壓力下保持冷靜。",
                en: "Second: Self-Management. Regulating emotions, setting goals, and staying cool under pressure.",
                action: () => {
                    highlightSector(2);
                    showIcon(2);
                }
            },
            // 3. Social Awareness
            {
                duration: 6000,
                cn: "第三：社會覺察。也就是同理心，理解他人的觀點和感受。",
                en: "Third: Social Awareness. Empathy. Understanding the perspectives and feelings of others.",
                action: () => {
                    highlightSector(3);
                    showIcon(3);
                }
            },
            // 4. Relationship Skills
            {
                duration: 6000,
                cn: "第四：人際技能。倾聽、溝通、合作，並建立健康的關係。",
                en: "Fourth: Relationship Skills. Listening, communicating, cooperating, and building healthy bonds.",
                action: () => {
                    highlightSector(4);
                    showIcon(4);
                }
            },
            // 5. Responsible Decision-Making
            {
                duration: 6000,
                cn: "第五：負責任的决策。做出不僅對自己好，也對他人有益的選擇。",
                en: "Fifth: Responsible Decision-Making. Making choices that are good for you and others.",
                action: () => {
                    highlightSector(5);
                    showIcon(5);
                }
            },
            // Outro
            {
                duration: 5000,
                cn: "當這五種能力結合在一起時，我們的内心花園就會繁荣。",
                en: "When these five skills come together, our inner garden thrives.",
                action: () => {
                    resetWheel();
                    hideAllIcons();
                    // 整体旋转效果
                    document.querySelector('.wheel-svg').style.transform = "scale(1.2) rotate(360deg)";
                    document.querySelector('.wheel-svg').style.transition = "transform 5s ease-in-out";
                }
            },
            {
                duration: 6000,
                cn: "SEL 讓我们成為更自信、更善良、更智慧的人。",
                en: "SEL empowers us to be more confident, kind, and wise.",
                action: () => {
                    // 庆祝效果
                    createConfetti();
                    document.querySelector('.center-circle').setAttribute('fill', '#FFD700'); // 变金
                }
            }
        ];

        // 辅助函数
        function resetWheel() {
            document.querySelectorAll('.wheel-sector').forEach(el => {
                el.classList.remove('dimmed');
                el.classList.remove('highlight');
            });
            hideAllIcons();
        }

        function highlightSector(index) {
            document.querySelectorAll('.wheel-sector').forEach((el, i) => {
                if (i + 1 === index) {
                    el.classList.add('highlight');
                    el.classList.remove('dimmed');
                } else {
                    el.classList.add('dimmed');
                    el.classList.remove('highlight');
                }
            });
        }

        function hideAllIcons() {
            document.querySelectorAll('.icon-svg').forEach(el => {
                el.style.transform = "translate(-50%, -50%) scale(0)";
            });
        }

        function showIcon(index) {
            hideAllIcons();
            const icon = document.getElementById(`icon-${index}`);
            // 移动到中间并放大
            icon.style.transform = "translate(-50%, -50%) scale(1.5)";
            icon.style.zIndex = "20";
        }

        function createConfetti() {
            const colors = ['#E0BBE4', '#957DAD', '#D291BC', '#FEC8D8', '#FFDFD3'];
            const stage = document.getElementById('stage');
            
            for (let i = 0; i < 50; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                p.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                p.style.left = '50%';
                p.style.top = '50%';
                p.style.width = Math.random() * 10 + 5 + 'px';
                p.style.height = p.style.width;
                
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 200 + 100;
                const tx = Math.cos(angle) * velocity;
                const ty = Math.sin(angle) * velocity;

                p.animate([
                    { transform: 'translate(0,0) scale(1)', opacity: 1 },
                    { transform: `translate(${tx}px, ${ty}px) scale(0)`, opacity: 0 }
                ], {
                    duration: 2000,
                    easing: 'cubic-bezier(0, .9, .57, 1)',
                    delay: Math.random() * 500
                });
                
                stage.appendChild(p);
                // 清理
                setTimeout(() => p.remove(), 2500);
            }
        }

        // 播放引擎
        async function playMovie() {
            const subCn = document.querySelector('.sub-cn');
            const subEn = document.querySelector('.sub-en');
            const progressBar = document.getElementById('progress-bar');
            
            let totalDuration = timeline.reduce((acc, cur) => acc + cur.duration, 0);
            let currentTime = 0;

            // 预先等待一秒
            await new Promise(r => setTimeout(r, 1000));

            for (let step of timeline) {
                // 更新字幕
                subCn.style.opacity = 0;
                subEn.style.opacity = 0;
                
                // 动作
                step.action();

                // 字幕淡入
                setTimeout(() => {
                    subCn.textContent = step.cn;
                    subEn.textContent = step.en;
                    subCn.style.opacity = 1;
                    subEn.style.opacity = 1;
                }, 300);

                // 进度条动画
                const interval = 50;
                const steps = step.duration / interval;
                for(let i=0; i<steps; i++) {
                    currentTime += interval;
                    progressBar.style.width = (currentTime / totalDuration * 100) + "%";
                    await new Promise(r => setTimeout(r, interval));
                }
            }
            
            // 结束画面
            setTimeout(() => {
                subCn.textContent = "Social Emotional Learning";
                subEn.textContent = "Grow your inner garden.";
            }, 1000);
        }

        // 启动
        window.onload = playMovie;

    </script>
</body>
</html>
